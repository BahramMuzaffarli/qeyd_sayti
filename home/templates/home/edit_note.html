<!DOCTYPE html>
<html>
<head>
    <title>QeydLab - Qeyd DÃ¼zÉ™liÅŸ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
    body { background:#f5f6f8; font-family:Arial; display:flex; justify-content:center; align-items:flex-start; padding:40px 20px }
        .box { background:#fff; width:100%; max-width:520px; padding:20px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.12) }
        label{ display:block; margin-top:8px; color:#333; font-weight:500 }
        input[type="text"], textarea { width:100%; padding:10px; margin-top:8px; border-radius:8px; border:1px solid #ccc }
        textarea { resize: vertical; min-height:60px }
        .section-title { margin-top:20px; font-size:1.1em; font-weight:700; color:#007BFF; border-bottom:1px solid #e0e0e0; padding-bottom:4px; }
        .btn{ background:#007BFF; color:#fff; padding:10px 14px; border-radius:8px; border:none; cursor:pointer }
        .back-link{ margin-left:10px; text-decoration:none; color:#555; font-weight:500 }
    </style>
</head>
<body>
    {% include 'home/sidebar.html' %}
    <div class="main-with-sidebar">
        <div class="box">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2 style="margin:0">{{ t.edit_title }}</h2>
            <div style="display:flex; gap:8px; align-items:center;">
                <div class="lang-dropdown-small" style="position:relative;">
                    <button id="langBtnEdit" class="btn secondary" type="button" style="display:flex; align-items:center; gap:8px;">
                        <span>{% if lang == 'en' %}ğŸ‡ºğŸ‡¸{% elif lang == 'ru' %}ğŸ‡·ğŸ‡º{% else %}ğŸ‡¦ğŸ‡¿{% endif %}</span>
                        <span>{{ lang|upper }}</span>
                        <span style="font-size:12px; margin-left:6px;">â–¾</span>
                    </button>
                    <div id="langMenuEdit" style="display:none; position:absolute; right:0; top:40px; background:#fff; color:#000; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.12); overflow:hidden; min-width:140px; z-index:50;">
                        <button class="lang-item-edit" data-lang="aze" style="width:100%; text-align:left; padding:10px; border:none; background:transparent; cursor:pointer">ğŸ‡¦ğŸ‡¿ AzÉ™rbaycan</button>
                        <button class="lang-item-edit" data-lang="en" style="width:100%; text-align:left; padding:10px; border:none; background:transparent; cursor:pointer">ğŸ‡ºğŸ‡¸ English</button>
                        <button class="lang-item-edit" data-lang="ru" style="width:100%; text-align:left; padding:10px; border:none; background:transparent; cursor:pointer">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
                    </div>
                </div>
            </div>
        </div>
        <form method="POST">
            {% csrf_token %}
            <label>Ad</label>
            <input type="text" name="first_name" value="{{ note.first_name }}" required>

            <label>Soyad</label>
            <input type="text" name="last_name" value="{{ note.last_name }}" required>

            <label>Qeyd</label>
            <textarea name="note" rows="6" required>{{ note.note }}</textarea>

            <!-- Yeni sahÉ™lÉ™r É™lavÉ™ olunur -->
            <div class="section-title">Muayene Bilgileri</div>

            <label>TanÄ± Bilgisi</label>
            <textarea name="tani_bilgisi">{{ note.tani_bilgisi }}</textarea>

            <label>Åikayet</label>
            <textarea name="sikayet">{{ note.sikayet }}</textarea>

            <label>Hikaye</label>
            <textarea name="hikaye">{{ note.hikaye }}</textarea>

            <label>Ã–zgeÃ§miÅŸ</label>
            <textarea name="ozgecmis">{{ note.ozgecmis }}</textarea>

            <label>Fizik Muayene</label>
            <textarea name="fizik_muayene">{{ note.fizik_muayene }}</textarea>

            <label>Bulgular</label>
            <textarea name="bulgular">{{ note.bulgular }}</textarea>

            <label>Tedavi</label>
            <textarea name="tedavi">{{ note.tedavi }}</textarea>

            <label>Ã–neriler / Not</label>
            <textarea name="oneriler">{{ note.oneriler }}</textarea>

            <div style="text-align:right; margin-top:12px;">
                <button type="submit" class="btn">{{ t.edit }}</button>
                <a href="{% url 'welcome' %}" class="back-link">{{ t.back }}</a>
            </div>
        </form>
        </div>
    </div>
    <script>
        // language dropdown for edit page
        document.addEventListener('DOMContentLoaded', function(){
            const btn = document.getElementById('langBtnEdit');
            const menu = document.getElementById('langMenuEdit');
            const items = document.querySelectorAll('.lang-item-edit');
            if(!btn) return;
            btn.addEventListener('click', function(e){ e.stopPropagation(); menu.style.display = (menu.style.display==='flex')? 'none':'flex'; menu.style.flexDirection='column'; });
            document.addEventListener('click', function(){ if(menu) menu.style.display = 'none'; });
            items.forEach(function(b){ b.addEventListener('click', function(){ const target=b.getAttribute('data-lang'); const next=encodeURIComponent(window.location.href); window.location.href = '/lang/'+target+'/?next='+next; }); });
        });
    </script>
</body>
</html>
