<!DOCTYPE html>
<html>
<head>
    <title>QeydLab</title>
    <link rel="icon" href="data:image/svg+xml;utf8,<svg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'><rect%20x='2'%20y='3'%20width='14'%20height='18'%20rx='2'%20fill='%23044f8a'/><path%20d='M16.5%203.5l4%204L10%2018l-4%201%201-4%2010.5-11.5z'%20fill='%23fff'/></svg>">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root{
            --bg: #f5f6f8; /* light gray site background */
            --box-bg: #fff;
            --primary: #007BFF;
            --muted: #666;
            --radius: 12px;
        }
        body {
            background-color: var(--bg);
            font-family: Arial, sans-serif;
            color: #222;
            display: flex;
            justify-content: center;
            padding: 30px 10px;
        }
        .box {
            background: var(--box-bg);
            width: 100%;
            max-width: 900px;
            border-radius: var(--radius);
            box-shadow: 0 6px 18px rgba(0,0,0,0.12);
            padding: 18px;
        }
        .header {
            display:flex;
            justify-content:space-between;
            align-items:center;
            margin-bottom: 16px;
        }
        h1 { margin:0; font-size:20px; color:#004080 }
        .controls { display:flex; gap:10px; align-items:center }
        select, input[type="text"] { padding:8px 10px; border-radius:8px; border:1px solid #ccc }

        /* From Uiverse.io by ercnersoy */
        .input {
            border: none;
            padding: 1rem;
            border-radius: 1rem;
            background: #e8e8e8;
            box-shadow: 20px 20px 60px #c5c5c5,
                        -20px -20px 60px #ffffff;
            transition: 0.3s;
        }
        .input:focus {
            outline-color: #e8e8e8;
            background: #e8e8e8;
            box-shadow: inset 20px 20px 60px #c5c5c5,
                        inset -20px -20px 60px #ffffff;
            transition: 0.3s;
        }

        /* btn hover effect */
        .btn:hover {
            transform: scale(1.05);
        }

        /* Buttons: anchors and buttons should look consistent and not be underlined */
        .btn { background:var(--primary); color:#fff; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; text-decoration:none; display:inline-flex; align-items:center; gap:8px }
        .btn.secondary { background:#6c757d; text-decoration:none }

        table { width:100%; border-collapse:collapse; margin-top:12px }
        th, td { padding:12px; border-bottom:1px solid #eee; text-align:left }
        th { color:var(--muted); font-weight:600; }
        .actions a { margin-right:8px; padding:6px 10px; border-radius:6px; text-decoration:none; color:#fff }
        .actions .edit { background: #FD7E14 }
        .actions .delete { background: #DC3545 }

        @media (max-width:600px){
            .header { flex-direction:column; align-items:flex-start; gap:10px }
            .controls { width:100%; gap:6px }
            select, input[type="text"]{ width:100% }
        }
    </style>
</head>
<body>
    <div style="display:flex; gap:18px; width:100%;">
        {% include 'home/sidebar.html' %}
        <div class="main-with-sidebar">
            <div class="box">
                <div class="header">
                    <h1>{{ t.welcome }} {{ username }}!</h1>
                    <div class="controls">
                        <a href="{% url 'create_note' %}" class="btn">{{ t.create }}</a>
                    </div>
                </div>

                <!-- Modernized search form -->
                <form method="GET" style="margin-bottom:12px; display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
                    <select name="search_field" class="input" style="width:auto; min-width:120px;">
                        <option value="first_name" {% if search_field == 'first_name' %}selected{% endif %}>{{ 'Ad' }}</option>
                        <option value="last_name" {% if search_field == 'last_name' %}selected{% endif %}>{{ 'Soyad' }}</option>
                        <option value="note" {% if search_field == 'note' %}selected{% endif %}>{{ 'Qeyd' }}</option>
                    </select>

                    <input type="text" name="q" placeholder="{{ t.search }}..." value="{% if q %}{{ q }}{% endif %}" class="input" style="flex-grow:1; min-width:200px;">

                    <button type="submit" class="btn" style="padding:1rem 1.5rem; border-radius:1rem; box-shadow:20px 20px 60px #c5c5c5, -20px -20px 60px #ffffff; transition:0.3s;">
                        {{ t.search }}
                    </button>

                    <a href="{% url 'welcome' %}" class="btn secondary" style="padding:1rem 1.5rem; border-radius:1rem; background:#e8e8e8; color:#444; text-decoration:none; box-shadow:20px 20px 60px #c5c5c5, -20px -20px 60px #ffffff; transition:0.3s;">
                        {{ t.clear }}
                    </a>
                </form>

                <!-- Existing table and content remains unchanged -->
                <table>
                    <thead>
                        <tr>
                            <th>{{ 'Ad' }}</th>
                            <th>{{ 'Soyad' }}</th>
                            <th>{{ 'Qeyd' }}</th>
                            <th>Tarix</th>
                            <th>{{ 'Əməliyyatlar' }}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for note in notes %}
                        <tr>
                            <td>{{ note.first_name }}</td>
                            <td>{{ note.last_name }}</td>
                            <td>{{ note.note }}</td>
                            <td>{{ note.created_at|date:"Y-m-d H:i" }}</td>
                            <td class="actions">
                                <a href="{% url 'edit_note' note.id %}" class="edit">{{ t.edit }}</a>
                                <a href="{% url 'delete_note' note.id %}" class="delete delete-link">{{ t.delete }}</a>
                            </td>
                        </tr>
                        {% empty %}
                        <tr><td colspan="5" style="text-align:center; padding:18px; color:#666">{{ t.no_records }}</td></tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
</html>
