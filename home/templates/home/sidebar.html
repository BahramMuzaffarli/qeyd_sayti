<aside id="qeyd-sidebar" style="position:fixed; left:0; top:0; bottom:0; width:260px; background:linear-gradient(180deg,#044f8a,#033a66); border-right:1px solid rgba(0,0,0,0.06); padding:20px; box-shadow:2px 0 18px rgba(2,24,47,0.12); z-index:60; overflow:auto;">
    <div style="display:flex; flex-direction:column; gap:16px; height:100%;">
        <a href="{% url 'welcome' %}" style="text-decoration:none; color:inherit; display:flex; align-items:center; gap:12px;">
            <div style="width:44px; height:44px; border-radius:10px; background:rgba(255,255,255,0.08); display:flex; align-items:center; justify-content:center; font-weight:800; color:#ffffff; font-size:16px">QL</div>
            <div style="font-weight:900; color:#ffffff; font-size:18px; letter-spacing:0.2px">QeydLab</div>
        </a>

        <nav style="margin-top:8px; display:flex; flex-direction:column; gap:8px;">
            <div>
                <a href="{% url 'welcome' %}" style="display:block; padding:10px 12px; border-radius:8px; color:#e8f6ff; font-weight:700; text-decoration:none;">Müştərilər</a>
                <div style="display:flex; flex-direction:column; gap:6px; margin-top:8px; padding-left:6px;">
                    <a href="{% url 'welcome' %}" style="padding:8px 10px; border-radius:8px; color:#dbeeff; text-decoration:none; background:transparent">Yaradılan qeydlər</a>
                </div>
            </div>

            <div>
                <a href="#" id="adminToggleLink" style="display:flex; justify-content:space-between; align-items:center; padding:10px 12px; border-radius:8px; color:#eaf6ff; text-decoration:none; font-weight:700; background:transparent">Administrator <span style="color:#dbeeff">▾</span></a>
                <div id="adminMenu" style="display:none; margin-top:8px; display:flex; flex-direction:column; gap:6px; padding-left:6px;">
                    <a href="{% url 'users_list' %}" style="padding:8px 10px; border-radius:8px; color:#dbeeff; text-decoration:none;">Userlər</a>
                </div>
            </div>
        </nav>

        <div style="margin-top:auto; padding-top:12px; border-top:1px solid rgba(255,255,255,0.06);">
            <div style="font-size:12px; color:rgba(255,255,255,0.7);">Logged as</div>
            <div style="font-weight:700; color:#ffffff; margin-top:6px">{{ request.user.username|default:request.session.username|default:'Qonaq' }}</div>
        </div>
    </div>
</aside>

<style>
    /* main content shifts to make room for the fixed sidebar */
    .main-with-sidebar { margin-left: 280px; width: calc(100% - 300px); padding: 18px 20px; box-sizing: border-box; }
    .main-with-sidebar .box { max-width: none; width:100%; }
    @media (max-width:900px){
        #qeyd-sidebar{ position:relative; width:100%; height:auto; box-shadow:none; border-right:none }
        .main-with-sidebar{ margin-left:0; width:100%; padding:12px }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function(){
        const toggleLink = document.getElementById('adminToggleLink');
        const menu = document.getElementById('adminMenu');
        if(toggleLink && menu){
            toggleLink.addEventListener('click', function(e){
                e.preventDefault();
                menu.style.display = (menu.style.display === 'flex') ? 'none' : 'flex';
            });
        }
    });
</script>
